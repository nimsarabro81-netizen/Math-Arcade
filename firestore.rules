/**
 * @fileoverview Firestore Security Rules for VectorZen.
 *
 * Core Philosophy:
 * This ruleset prioritizes data security by restricting write access based on
 * authentication status. Read access to leaderboard data is public to enable
 * the core functionality of the application. Write access is generally denied.
 *
 * Data Structure:
 * - /userRanks: Stores VectorZen game rankings. Public read, restricted write.
 * - /algebraRanks: Stores Algebra Arena game rankings. Public read, restricted write.
 * - /equationRanks: Stores Equation Equilibrium game rankings. Public read, restricted write.
 * - /gameSettings: Stores game active states. Public read, restricted write.
 *
 * Key Security Decisions:
 * - User listing is explicitly disallowed for all collections containing private user data.
 * - Data validation is relaxed during the prototyping phase to allow for schema iteration,
 *   focusing on authorization and relational integrity.
 */
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    /**
     * @description Allows public read access to user ranking data for VectorZen game. Write access is denied.
     * @path /userRanks
     * @allow (get, list): Any user can read the ranking data.
     * @deny (create, update, delete): No user can create, update, or delete ranking data.
     * @principle Allows public leaderboard, prevents unauthorized writes.
     */
    match /userRanks {
      allow get, list: if true;
      allow create, update, delete: if false;
    }

    /**
     * @description Allows public read access to user ranking data for Algebra Arena game. Write access is denied.
     * @path /algebraRanks
     * @allow (get, list): Any user can read the ranking data.
     * @deny (create, update, delete): No user can create, update, or delete ranking data.
     * @principle Allows public leaderboard, prevents unauthorized writes.
     */
    match /algebraRanks {
      allow get, list: if true;
      allow create, update, delete: if false;
    }

    /**
     * @description Allows public read access to user ranking data for Equation Equilibrium game. Write access is denied.
     * @path /equationRanks
     * @allow (get, list): Any user can read the ranking data.
     * @deny (create, update, delete): No user can create, update, or delete ranking data.
     * @principle Allows public leaderboard, prevents unauthorized writes.
     */
    match /equationRanks {
      allow get, list: if true;
      allow create, update, delete: if false;
    }

    /**
     * @description Allows public read access to game settings. Write access is denied.
     * @path /gameSettings
     * @allow (get, list): Any user can read the game settings.
     * @deny (create, update, delete): No user can create, update, or delete game settings.
     * @principle Allows public access to game settings, prevents unauthorized writes.
     */
    match /gameSettings {
      allow get, list: if true;
      allow create, update, delete: if false;
    }
  }
}