/**
 * @file Firestore Security Rules
 * @description This ruleset enforces a security model where read access to leaderboard data is public, but write access (create, update, delete) is denied to all clients, requiring server-side management.  Game settings are also publicly readable, but unmodifiable by clients.
 * @dataStructure
 *  - /userRanks: Publicly readable leaderboard data for the VectorZen game.  Write operations are only performed by a trusted server.
 *  - /algebraRanks: Publicly readable leaderboard data for the Algebra Arena game.  Write operations are only performed by a trusted server.
 *  - /equationRanks: Publicly readable leaderboard data for the Equation Equilibrium game. Write operations are only performed by a trusted server.
 *  - /gameSettings: Publicly readable game settings. Write access is denied.
 * @keySecurityDecisions
 *  - Public Read Access: Leaderboard data and game settings are publicly readable to enable display and game logic.
 *  - Deny Client Writes: All write operations (create, update, delete) are explicitly denied to clients to prevent unauthorized modifications of leaderboard data or game settings.
 */
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    /**
     * @description Allows public read access to user rankings for the VectorZen game, but denies all write operations.
     * @path /userRanks
     * @allow (get, list): Any user can read the leaderboard.
     * @deny (create, update, delete): No user can create, update, or delete leaderboard entries.
     * @principle Public read, deny client writes.
     */
    match /userRanks/{userRankId} {
      allow get, list: if true;
      allow create: if false;
      allow update: if false;
      allow delete: if false;
    }

    /**
     * @description Allows public read access to user rankings for the Algebra Arena game, but denies all write operations.
     * @path /algebraRanks
     * @allow (get, list): Any user can read the leaderboard.
     * @deny (create, update, delete): No user can create, update, or delete leaderboard entries.
     * @principle Public read, deny client writes.
     */
    match /algebraRanks/{algebraRankId} {
      allow get, list: if true;
      allow create: if false;
      allow update: if false;
      allow delete: if false;
    }

    /**
     * @description Allows public read access to user rankings for the Equation Equilibrium game, but denies all write operations.
     * @path /equationRanks
     * @allow (get, list): Any user can read the leaderboard.
     * @deny (create, update, delete): No user can create, update, or delete leaderboard entries.
     * @principle Public read, deny client writes.
     */
    match /equationRanks/{equationRankId} {
        allow get, list: if true;
        allow create: if false;
        allow update: if false;
        allow delete: if false;
    }

    /**
     * @description Allows public read access to game settings, but denies all write operations.
     * @path /gameSettings
     * @allow (get, list): Any user can read the game settings.
     * @deny (create, update, delete): No user can create, update, or delete game settings.
     * @principle Public read, deny client writes.
     */
    match /gameSettings/{gameSettingId} {
      allow get, list: if true;
      allow create: if false;
      allow update: if false;
      allow delete: if false;
    }
  }
}