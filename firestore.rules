/**
 * @fileoverview Firestore Security Rules for VectorZen.
 *
 * Core Philosophy:
 * This ruleset prioritizes ease of iteration by focusing on authorization and skipping detailed data validation.
 * Read access to game settings is public, while all other collections are write-protected for now.
 *
 * Data Structure:
 * - /gameSettings: Stores public game settings (isActive flag).
 * - /userRanks: Stores user ranking information.
 * - /algebraRanks: Stores user ranking information for algebra game.
 * - /equationRanks: Stores user ranking information for equation game.
 *
 * Key Security Decisions:
 * - Game settings are publicly readable to facilitate the app's core functionality of displaying active games.
 * - Ranking data, while public in nature, is write-protected during this prototyping phase to prevent abuse.
 * - No user-specific data is currently present, so user-based access control is not yet implemented beyond requiring a valid auth.
 */
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    /**
     * @description Allows anyone to read game settings, but restricts all write access.
     * @path /gameSettings
     * @allow (get, list): Any user can read the game settings.
     * @deny (create, update, delete): No one can create, update, or delete game settings through the client.
     * @principle Allows public read access to game settings for displaying active games.
     */
    match /gameSettings/{document} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }

    /**
     * @description Restricts all read and write access to userRanks collection.
     * @path /userRanks
     * @allow None
     * @deny All operations are denied, requiring backend management of ranking data.
     * @principle Prevents unauthorized modifications to user ranking data.
     */
    match /userRanks/{document} {
      allow get, list: if false;
      allow create, update, delete: if false;
    }

    /**
     * @description Restricts all read and write access to algebraRanks collection.
     * @path /algebraRanks
     * @allow None
     * @deny All operations are denied, requiring backend management of ranking data.
     * @principle Prevents unauthorized modifications to user ranking data.
     */
    match /algebraRanks/{document} {
      allow get, list: if false;
      allow create, update, delete: if false;
    }

    /**
     * @description Restricts all read and write access to equationRanks collection.
     * @path /equationRanks
     * @allow None
     * @deny All operations are denied, requiring backend management of ranking data.
     * @principle Prevents unauthorized modifications to user ranking data.
     */
    match /equationRanks/{document} {
      allow get, list: if false;
      allow create, update, delete: if false;
    }

  }
}