/**
 * @file Firestore Security Rules
 * @description This ruleset defines access control for the VectorZen application's Firestore database.
 *
 * Core Philosophy:
 *   The ruleset prioritizes public read access to ranking data while restricting write access to prevent unauthorized modifications.
 *
 * Data Structure:
 *   The database consists of several top-level collections: `userRanks`, `algebraRanks`, `equationRanks`, and `gameSettings`.
 *   - `userRanks`, `algebraRanks`, and `equationRanks` store user ranking data for different games.
 *   - `gameSettings` stores the active status of each game.
 *
 * Key Security Decisions:
 *   - Ranking data is publicly readable to allow display of leaderboards.
 *   - Writes to ranking data are denied (enforced by `allow create, update, delete: if false;`) to prevent cheating or unauthorized modifications.
 *   - `gameSettings` are also publicly readable to allow the app to determine which games are active. Writes are denied to prevent unauthorized changes to game settings.
 */
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    /**
     * @description Allows public read access to user ranking data for VectorZen.  Writes are disallowed.
     * @path /databases/{database}/documents/userRanks
     * @allow (get, list) Any user can read the ranking data.
     * @deny (create, update, delete) No user can modify the ranking data.
     * @principle Allows public read access while preventing unauthorized writes.
     */
    match /userRanks/{userRankId} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }

    /**
     * @description Allows public read access to user ranking data for Algebra Arena.  Writes are disallowed.
     * @path /databases/{database}/documents/algebraRanks
     * @allow (get, list) Any user can read the ranking data.
     * @deny (create, update, delete) No user can modify the ranking data.
     * @principle Allows public read access while preventing unauthorized writes.
     */
    match /algebraRanks/{algebraRankId} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }

    /**
     * @description Allows public read access to user ranking data for Equation Equilibrium.  Writes are disallowed.
     * @path /databases/{database}/documents/equationRanks
     * @allow (get, list) Any user can read the ranking data.
     * @deny (create, update, delete) No user can modify the ranking data.
     * @principle Allows public read access while preventing unauthorized writes.
     */
    match /equationRanks/{equationRankId} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }

    /**
     * @description Allows public read access to game settings. Writes are disallowed.
     * @path /databases/{database}/documents/gameSettings
     * @allow (get, list) Any user can read the game settings.
     * @deny (create, update, delete) No user can modify the game settings.
     * @principle Allows public read access while preventing unauthorized writes.
     */
    match /gameSettings/{gameSettingId} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }
  }
}